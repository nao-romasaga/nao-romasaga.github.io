<!DOCTYPE html>
<html lang="ja">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138966739-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());

            gtag('config', 'UA-138966739-1');
        </script>
        -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript" src="./js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="./js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="./js/jquery.ui.touch-punch.js"></script>
        <link rel="stylesheet" href="./css/tabulator.css">
        <script type="text/javascript" src="./js/tabulator.js"></script>

        <link rel="stylesheet" type="text/css" href="./css/bootstrap/bootstrap.min.css">
        <script src="./js/popper.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="./css/style.css">
        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/ui/3.5.2/firebase-ui-auth__ja.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
        <script src="./js/Firebase.js"></script>
        <script src="./js/utils.js" ></script>

        <!--
        <script src="./js/mydata.js" ></script>
        -->
        <link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" rel="stylesheet">
        <title>„É≠„Éû„Çµ„Ç¨RS „Éë„Éº„ÉÜ„Ç£ËÇ≤Êàê„É°„É¢@nao_romasaga</title>
        <!-- http://ifs.nog.cc/hkaityo.hp.infoseek.co.jp/dq/rs2-01.html -->
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style>
            .filterActive{
                background-color: #93CBFF !important;
                border: 1px solid #0000FF !important;
                border-radius: 3px;
            }
        </style>
    </head>
    <body>
        <div class ="haikei">
            <div class="container">
                <div class="text-center">
                    <a href="https://www.jp.square-enix.com/saga_reuniverse/" target="new"><img src="https://www.jp.square-enix.com/saga_reuniverse/assets/img/cmn_logo01_sp.png" class="col-sm-12 col-md-8 col-lg-6"></a>
                </div>
                <h3 class="text-center title-text">„Çπ„ÉÜ„Éº„Çø„Çπ‰∏äÈôê„ÉÅ„Çß„ÉÉ„ÇØ</h3>
                <p class="text-right opacity"><small>„Éê„Ç∞Áô∫Ë¶ã„ÄÅ„ÅîË¶ÅÊúõ„ÅØ <a href="https://twitter.com/nao_romasaga_rs" target="new">nao_romasaga_rs</a>„Åæ„Åß</small>
                </p>
                <div id="firebaseui-auth-container" style="margin-bottom:10px;"></div>

                <h5 class="text-center opacity kadomaru" onclick="$('.movie').toggleClass('d-none')">„Å§„Åã„ÅÑ„Åã„ÅüÂãïÁîª„Çí„Åø„Çã</h5>
                <div class="movie d-none">
                    <blockquote class="twitter-tweet"><p lang="ja" dir="ltr">[new] „Éë„Éº„ÉÜ„Ç£ËÇ≤Êàê„É°„É¢<br>ËÇ≤Êàê„ÅÆÈöõ„Å´ÂêÑ„Çπ„Çø„Ç§„É´„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ‰∏äÈôê„ÇíÁ¢∫Ë™ç„ÇíË°å„Åà„ÇãÊ©üËÉΩ„Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü<a href="https://t.co/T9hQHFJD1n">https://t.co/T9hQHFJD1n</a><br><br>„Çπ„Éó„Ç∑„Å†„Å®„Éë„Éº„ÉÜ„Ç£Âàá„ÇäÊõø„Åà„ÅåÈù¢ÂÄí„Å†„Å£„Åü„ÅÆ„Åß‰Ωú„Çä„Åæ„Åó„Åü(‡πë‚Ä≤·¥ó‚Äµ‡πë)<br>„ÇÜ„Åè„ÇÜ„Åè„ÅØË§áÊï∞„Éë„Éº„ÉÜ„Ç£Ë®≠ÂÆö„Çí‰∫àÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô<br><br>„ÅäÂ∏ÉÊñΩ„ÇÇ„ÅäÂæÖ„Å°„Åó„Å¶„Åä„Çä„Åæ„Åôüòò<a href="https://t.co/3qFDqY1Kdx">https://t.co/3qFDqY1Kdx</a> <a href="https://t.co/Y1aVBPYZWu">pic.twitter.com/Y1aVBPYZWu</a></p>&mdash; (nAo)@„É≠„Éû„Çµ„Ç¨RS (@nao_romasaga_rs) <a href="https://twitter.com/nao_romasaga_rs/status/1122948484208910336?ref_src=twsrc%5Etfw">April 29, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
                <br>
                <h3 class="text-center title-text changeBase" data-base=0>Âë®ÂõûÈÅ©Ê≠£„ÉÅ„Çß„ÉÉ„ÇØ</h3>
                <label class="badge badge-pill badge-light">Áµû„ÇäËæº„Åø</label>
                <div class="style-bgcolor text-center small row" style="width:100%; margin: 0px;">
                    <ul class="nav text-center width-100">
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_ken"><span class="icon_mini icon_ken" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_dken"><span class="icon_mini icon_dken" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_ono"><span class="icon_mini icon_ono" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_kon"><span class="icon_mini icon_kon" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_tai"><span class="icon_mini icon_tai" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_ju"><span class="icon_mini icon_ju" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_sken"><span class="icon_mini icon_sken" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_yumi"><span class="icon_mini icon_yumi" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_yari"><span class="icon_mini icon_yari" onclick=""></span></a></li>
                        <li class="col-2 col-sm-1 xs-pad0"><a class="filterList pad0" data-type="WeaponTypeFilter" href="#icon_tsue"><span class="icon_mini icon_tsue" onclick=""></span></a></li>
                    </ul>
                    <ul class="nav text-center width-100">
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#RS1">RS1</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#RS2">RS2</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#RS3">RS3</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#SF1">SF1</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#SF2">SF2</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#US">US</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#SS">SS</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#ES">ES</a></li>
                        <li class="col-2 col-sm-1 blockquote text-center"><a class="filterList pad0" data-type="SeriesFilter" href="#ES">RSR</a></li>
                    </ul>
                </div>
                
                <label class="badge badge-pill badge-light">Ë°®Á§∫ÂÜÖÂÆπÂàá„ÇäÊõø„Åà</label>
                <div class="style-bgcolor text-center small row" style="width:100%; margin: 0px;">
                    <div class="col-6 col-lg-2" style="margin-bottom:10px;"><button class="icon_btn_off changeBase" data-base="0" style="width:100%; background-size: 100% 100%;">„Çπ„ÉÜ„Éº„Çø„ÇπÂÄ§</button></div>
                    <div class="col-6 col-lg-2" style="margin-bottom:10px;"><button class="icon_btn_on changeBase" data-base="45" style="width:100%; background-size: 100% 100%;">VH6‰ª•Ââç</button></div>
                    <div class="col-3 col-sm-3 col-lg-2"><button class="icon_btn_on changeBase" data-base="48" style="width:100%; background-size: 100% 100%;">VH7</button><br></div>
                    <div class="col-3 col-sm-3 col-lg-2"><button class="icon_btn_on changeBase" data-base="51" style="width:100%; background-size: 100% 100%;">VH8</button></div>
                    <div class="col-3 col-sm-3 col-lg-2"><button class="icon_btn_on changeBase" data-base="54" style="width:100%; background-size: 100% 100%;">VH9</button></div>
                    <div class="col-3 col-sm-3 col-lg-2"><button class="icon_btn_on changeBase" data-base="57" style="width:100%; background-size: 100% 100%;">VH10</button></div>
                </div>

                <label class="badge badge-pill badge-light">„ÅÇ„Å™„Åü„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„Éº‰∏ÄË¶ß</label>
                <div id="example-table-display" class="text-center">
                    <div id="example-table" style="width:402px"></div>
                </div>
                <label class="badge badge-pill badge-light">„Çπ„Çø„Ç§„É´Âà•‰∏äÈôê„ÅÆÁ¢∫Ë™ç / „Ç≠„É£„É©„ÇØ„Çø„ÉºÊÉÖÂ†±Êõ¥Êñ∞</label>
                <table class="width-100 text-center charTable charTmplIDc3d" data-charid="IDc3d" data-styleid="ID4c7d6">
                    <tbody><tr class="small text-center ">
                            <td>
                                <p class="width-100 pad0 mar0 openMenu" onclick="" data-id="IDc3d"><img src="./img/icon/icon_menu.png" width="25" height="25"></p>
                            </td>
                            <td colspan="9">
                                <p class="width-100 pad0 mar0 darkButton">ÁôΩËñîËñáÂß´</p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="10" class="inputArea" style="display: table-cell;">
                                <table class="fukidashi width-100">
                                    <tbody><tr class="text-nowrap">
                                            <td class="text-center" colspan="4">‚ñº„Çπ„ÉÜ„Éº„Çø„ÇπÂÖ•Âäõ‚ñº</td>
                                        </tr>
                                        <tr class="text-nowrap">
                                            <td >ËÖïÂäõ</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="STR" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charSTR" style="width: 50px" value="3"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="STR" data-pm="plus" onclick=""></td>
                                            <td >‰ΩìÂäõ</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="VIT" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charVIT" style="width: 50px" value="3"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="VIT" data-pm="plus" onclick=""></td>
                                        </tr>
                                        <tr class="text-nowrap">
                                            <td >Âô®Áî®„Åï</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="DEX" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charDEX" style="width: 50px" value="6"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="DEX" data-pm="plus" onclick=""></td>
                                            <td >Á¥†Êó©„Åï</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="AGI" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charAGI" style="width: 50px" value="7"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="AGI" data-pm="plus" onclick=""></td>
                                        </tr>
                                        <tr class="text-nowrap">
                                            <td >Áü•Âäõ</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="INT" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charINT" style="width: 50px" value="9"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="INT" data-pm="plus" onclick=""></td>
                                            <td >Á≤æÁ•û</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="MND" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charMND" style="width: 50px" value="6"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="MND" data-pm="plus" onclick=""></td>
                                        </tr>
                                        <tr class="text-nowrap">
                                            <td >ÊÑõ</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="AI" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charAI" style="width: 50px" value="7"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="AI" data-pm="plus" onclick=""></td>
                                            <td >È≠ÖÂäõ</td><td><img src="./img/icon/icon_minus.png" class="paramButton" width="30" data-param="MI" data-pm="minus" onclick=""><input type="number" class="input charParam kadomaru charMI" style="width: 50px" value="6"><img src="./img/icon/icon_plus.png" class="paramButton" width="30" data-param="MI" data-pm="plus" onclick=""></td>
                                        </tr>
                                        <tr class="char-bottom">
                                            <td colspan="9">
                                                <span data-toggle="tooltip" data-placement="top" data-html="true" style="margin-left:10px" title="" data-original-title="
                                                      ËÖï.‰Ωì.Âô®.ÈÄü.Áü•.Á≤æ.ÊÑõ.È≠Ö„ÅÆÈ†Ü„Å´ÂÖ•ÂäõÂá∫Êù•„Åæ„Åô<br>
                                                      Âå∫Âàá„ÇäÊñáÂ≠ó„ÅØ,.„Çπ„Éö„Éº„Çπ„Çø„Éñ„ÅåÂà©Áî®ÂèØËÉΩ„Åß„Åô<br>
                                                      Âå∫Âàá„ÇäÊñáÂ≠ó„Å™„Åó„Åß16Ê°Å„ÅÆÊï∞Â≠ó„Åß„ÇÇÂÖ•ÂäõÂèØËÉΩ„Åß„Åô<br>
                                                      „Çπ„ÉÜ„Éº„Çø„Çπ1Ê°Å„ÅÆÂ†¥Âêà„ÅØÂÖàÈ†≠„Å´0„Çí„Å§„Åë„Å¶„Åè„Å†„Åï„ÅÑ">
                                                    „Åæ„Å®„ÇÅ„Å¶ÂÖ•Âäõ<button class="icon_info_md"></button>
                                                </span>
                                                <div class="text-center width-100">
                                                    <input type="tel" class="input allparams" placeholder="50.41.01.20.30.40.50.99" data-id="IDc3d">
                                                    <button class="icon_btn_on hanei" style="width:100px; height:40px; background-size: 100px 40px;" data-id="IDc3d">ÂèçÊò†</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="char-bottom text-nowrap">
                                            <td class="text-center" colspan="4">‚ñº„Çπ„Çø„Ç§„É´ÈÅ∏Êäû‚ñº</td>
                                        </tr>
                                        <tr style=""><td colspan="4" class="STYLE_ICON"><span class="icon_bg_ss"><button class="style style_icon_ss" style="background:url(https://nao-romasaga.github.io/img/style_icon/ID4c7d6.png) no-repeat;" data-id="ID4c7d6"></button></span></td></tr>
                                        <tr style=""><td colspan="4">
                                                <button class="icon_btn_red charUnset" style="background-size: 150px 40px; width:150px; height: 40px;" data-id="IDc3d">Á∑®Êàê„Åã„ÇâÂ§ñ„Åô</button>
                                                <button class="icon_btn_on btn_close" style="background-size: 150px 40px; width:150px; height: 40px;" data-id="IDc3d">Èñâ„Åò„Çã</button>
                                            </td></tr>
                                    </tbody></table>
                            </td>
                        </tr>
                        <tr class="text-center nowData" onclick="" data-id="IDc3d">
                            <td style="width:20%" colspan="2" data-id="IDc3d">
                                <span class="char dot_mid dot char-winner" style="background:url(https://nao-romasaga.github.io/img/dot/ID4c7d6.png) no-repeat; margin-left:20px;"></span>
                            </td>
                            <td style="width:10%">ËÖï<br><span class="STR charSTRIDc3d">53</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">‰Ωì<br><span class="VIT charVITIDc3d">54</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">Âô®<br><span class="DEX charDEXIDc3d">55</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">ÈÄü<br><span class="AGI charAGIIDc3d">54</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">Áü•<br><span class="INT charINTIDc3d">58</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">Á≤æ<br><span class="MND charMNDIDc3d">57</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">ÊÑõ<br><span class="AI charAIIDc3d">58</span></td>
                            <td style="width:10%; border-left: 1px solid #faf0b4">È≠Ö<br><span class="MI charMIIDc3d">55</span></td>
                        </tr>
                        <tr class="text-center LIMIT limitID4c7d6" style="border: 1px solid #faf0b4" data-styleid="ID4c7d6" data-charid="IDc3d">
                            <td style="width:10%">
                                <img class="rare" src="./img/icon/icon_SS.png" width="25">
                            </td>
                            <td style="width:10%">
                                <img class="icn" src="./img/style_icon/ID4c7d6.png" width="30">
                            </td>
                            <td class="STR status_plus" style="width:10%; ">2</td>
                            <td class="VIT status_plus" style="width:10%; border-left: 1px solid #faf0b4;">2</td>
                            <td class="DEX status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                            <td class="AGI status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                            <td class="INT status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                            <td class="MND status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                            <td class="AI status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                            <td class="MI status_plus" style="width:10%; border-left: 1px solid #faf0b4;">3</td>
                        </tr></tbody></table>
            </div>
        </div>
        <script>
                    var tableLimit = 15;
                    var MY_DATA_LIST = [];
                    var table;
                    $(".filterList").click(function () {
                        $(this).parent().toggleClass("filterActive");
                        if (table === undefined) {
                            return;
                        }
                        filter();
                    });
                    function filter() {
                        let weaopnFilter = [];
                        let seriesFilter = [];
                        $(".filterList").each(function () {
                            let target = $(this).attr("data-type");
                            let value = $(this).attr("href").substr(1);
                            if ($(this).parent().hasClass("filterActive")) {
                                if (target === "WeaponTypeFilter") {
                                    weaopnFilter.push({field: target, type: "=", value: value});
                                } else {
                                    seriesFilter.push({field: target, type: "=", value: value});
                                }
                            }
                        });
                        table.clearFilter();
                        let finalFilter = [{field: "SUM", type: ">", value: 0}];
                        if (weaopnFilter.length > 0) {
                            finalFilter.push(weaopnFilter);
                        }
                        if (seriesFilter.length > 0) {
                            finalFilter.push(seriesFilter);
                        }
                        table.setFilter(finalFilter);
                        console.log(finalFilter);
                        changeId2Dot();
                    }

                    $(".changeBase").click(function () {
                        let base = Number($(this).attr("data-base"));
                        let pm = -1;
                        let sort = "desc";

                        if (base !== 0) {
                            pm = 1;
                            sort = "asc";
                        }
                        for (let mydata of MY_DATA_LIST) {
                            let sum = 0;
                            for (let key of PARAM_KEY) {
                                if (base === 0) {
                                    mydata[key] = mydata["org" + key];
                                    sum += mydata["org" + key];
                                } else {
                                    console.log(CHAR_MASTER[mydata["id"]]['Name'], key, base, CHAR_MASTER[mydata["id"]]['MAX' + key], mydata["org" + key])
                                    let calc = (base + CHAR_MASTER[mydata["id"]]['MAX' + key] - mydata["org" + key]) * pm;
                                    if (calc > 0) {
                                        mydata[key] = calc;
                                        sum += calc;
                                    } else {
                                        mydata[key] = "x"
                                    }
                                }
                            }
                            mydata["SUM"] = sum;
                        }
                        drawTable(MY_DATA_LIST, sort);
                        filter();
                    });
                    $(document).on('click', ".tabulator-header, .tabulator-footer, .tabulator-page", function () {
                        changeId2Dot();
                    });

                    let MY_DATA, CHAR_MASTER;
                    readMyChar(function (read) {
                        MY_DATA = read;
                        if (MY_DATA !== undefined && CHAR_MASTER !== undefined) {
                            init();
                        }
                    });
                    readFile('Char', function (read) {
                        CHAR_MASTER = read;
                        if (MY_DATA !== undefined && CHAR_MASTER !== undefined) {
                            init();
                        }
                    });

                    function init() {
                        let mydata = MY_DATA;
                        for (let i in mydata) {
                            //let src = `<img src="./img/dot/${CHAR_MASTER[i]['DotId']}.png">`;
                            mydata[i]['id'] = i;
                            mydata[i]['DotId'] = "Dot" + CHAR_MASTER[i]['DotId'];
                            mydata[i]['Name'] = CHAR_MASTER[i]['Name'];
                            mydata[i]['Series'] = CHAR_MASTER[i]['Series'];
                            mydata[i]['WeaponType'] = ICON_LIST[CHAR_MASTER[i]['WeaponType']];
                            mydata[i]['SeriesFilter'] = CHAR_MASTER[i]['Series'];
                            mydata[i]['WeaponTypeFilter'] = ICON_LIST[CHAR_MASTER[i]['WeaponType']];

                            console.log(CHAR_MASTER[i]);
                            for (let key of PARAM_KEY) {
                                mydata[i]["org" + key] = mydata[i][key];
                            }

                            mydata[i]['SUM'] =
                                    Number(mydata[i]["STR"]) + Number(mydata[i]["VIT"]) + Number(mydata[i]["DEX"]) + Number(mydata[i]["AGI"]) +
                                    Number(mydata[i]["INT"]) + Number(mydata[i]["MND"]) + Number(mydata[i]["AI"]) + Number(mydata[i]["MI"]);
                            MY_DATA_LIST.push(mydata[i]);
                        }
                        delete MY_DATA;
                        drawTable(MY_DATA_LIST);
                    }

                    function changeId2Dot() {
                        $("#example-table").find(".tabulator-cell").each(function () {
                            let id = $(this).text();
                            if (id.indexOf("Dot") > -1) {
                                let src = `<img src="./img/dot/${id.substr(3)}.png" style="object-position: -10px -10px">`;
                                $(this).html(src);
                            } else if (id.indexOf("icon") > -1) {
                                let src = `<span class="icon_mini_zokusei ${id}"></span>`;
                                $(this).html(src);
                            } else if (Number(id) < 5
                                    && $(this).attr("tabulator-field") !== "SUM"
                                    && $(this).attr("tabulator-field") !== "DotId") {
                                let attr = $(this).attr("style");
                                $(this).attr("style", attr + ' background-color: palegreen;');
                            } else if (id.indexOf("x") > -1) {
                                let attr = $(this).attr("style");
                                $(this).attr("style", attr + ' background-color: lightslategray; color: white');
                            }
                        });
                    }
                    $(document).on('click', ".tabulator-cell", function () {
                        $(this).parent().find(".tabulator-cell").each(function () {
                            let id = $(this).text();
                            if (id.indexOf("ID") > -1) {
                                console.log(CHAR_MASTER[id]);
                            }
                        });
                    });

                    function drawTable(result, sort) {
                        let dir = (sort === undefined) ? "desc" : sort;
                        $("#example-table").remove();
                        $("#example-table-display").append('<div id="example-table" style="width:100%"></div>');

                        let base = {align: "right", sortable: true, sorter: "number", minWidth: 30, width: "8%"};
                        table = new Tabulator("#example-table", {
                            layout: "fitColumns",
                            data: result,
                            //layout: "fitColumns", //fit columns to width of table
                            //responsiveLayout: "hide", //hide columns that dont fit on the table
                            tooltips: false, //show tool tips on cells
                            history: true, //allow undo and redo actions on the table
                            pagination: "local", //paginate the data
                            paginationSize: tableLimit, //allow 7 rows per page of data
                            //movableColumns: true, //allow column order to be changed
                            //resizableRows: true, //allow row order to be changed
                            initialSort: [//set the initial sort order of the data
                                {column: "SUM", dir: dir},
                            ],
                            autoResize: false,
                            resizableRows: false,
                            resizableColumns: false,
                            responsiveLayout: true,
                            columns: [
                                {title: "", field: "DotId", width: 30, frozen: true},
                                {title: "ÂêçÂâç", field: "Name", responsive: 8},
                                {title: "‰ΩúÂìÅ", field: "Series", width: 30, responsive: 10},
                                {title: "Ê≠¶Âô®", field: "WeaponType", width: 30, responsive: 9},
                                {title: "", field: "id", visible: false},
                                {title: "", field: "SeriesFilter", visible: false},
                                {title: "", field: "WeaponTypeFilter", visible: false},
                                Object.assign({title: "ËÖï", field: "STR"}, base),
                                Object.assign({title: "‰Ωì", field: "VIT", }, base),
                                Object.assign({title: "Âô®", field: "DEX", }, base),
                                Object.assign({title: "ÈÄü", field: "AGI", }, base),
                                Object.assign({title: "Áü•", field: "INT", }, base),
                                Object.assign({title: "Á≤æ", field: "MND", }, base),
                                Object.assign({title: "ÊÑõ", field: "AI", }, base),
                                Object.assign({title: "È≠Ö", field: "MI", }, base),
                                {title: "ÂêàË®à", field: "SUM", sortable: true, sorter: "number"},
                            ],
                        });

                        table.setFilter("SUM", ">", 0);
                        changeId2Dot();
                    }
        </script>
    </body>
</html>
